# Awesome-Task-Exchange-System!

`./old diagram` - домашнее задание 0-ой недели (до прохождения курса) 

`./diagrams week1` - домашнее задание 1-ой недели

## Переход на новую версию события
В этом проекте schema-registry реализована как библиотека.
1. Создаём новую версию сообщения в `schema_registry/<message>/v<version>.proto`
2. Публикуем новую версию библиотеки
3. Переходим на новую версию библиотеки в сервисах-консьюмерах, поддерживая одновременно обработку событий двух версий
4. Переходим на новую версию библиотеки в сервисах-продьюсерах, переставая публиковать события в старом формате
5. Рефакторинг сервисов-консьюмеров – перестаём обрабатывать события старого формата (их больше никто не отправляет)


## Стратегия обработки ошибок
### Message Broker перестал работать
Необходимо создать в каждом микросервисе (где есть продьюсеры) отдельную Outbox таблицу, в которую будут сохраняться все события, предназначенные для отправки. Отдельный процесс должен вычитывать новые записи из этой таблицы и производить саму отправку (в случае успешной отправки, сообщение помечается как отправленное). Таким образом мы можем гарантировать отправку всех событий, а также последовательность их отправки.
### Событие оказалось невалидным
Необходимо создать в каждом микросервисе (где есть консьюмеры) отдельную Inbox таблицу, в которую будут сохраняться все входящие события, которые не удалось обработать. При сохранении сообщения в эту таблицу, должен отправляться alert. Этот метод предпочтительнее чем dead message queue, потому что если несколько консьюмеров слушают один топик, и один из консьюмеров смог обработать сообщение, а другой – не смог, то повторная отправка сообщения в этот топик может вызвать повторную обработку события в одном из консьюмеров.
### Развалилась бизнес-логика
Предусмотреть бизнес-процессы (события), которые могут уведомлять остальные микросервисы о возникшей ошибке и корректно, с точки зрения бизнеса, обрабатывать её.
